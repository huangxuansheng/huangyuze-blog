# 浏览器是如何渲染UI的？

浏览器渲染 UI 的过程可以简单地概括为以下几个步骤：

1. **构建 DOM 树（Document Object Model）**：当浏览器接收到 HTML 文件时，会通过解析 HTML 标记和文本内容构建 DOM 树。DOM 树是一个表示文档结构的树形结构，其中每个节点代表文档中的一个元素、属性或文本。

2. **构建 CSSOM 树（CSS Object Model）**：浏览器解析 CSS 文件，并根据 CSS 规则构建 CSSOM 树。CSSOM 树表示了文档中所有样式规则的层次结构。

3. **合并 DOM 树和 CSSOM 树**：浏览器将 DOM 树和 CSSOM 树合并成一棵渲染树（Render Tree）。渲染树只包含需要显示在页面上的节点和样式信息，不包含不可见的节点（如 `<head>`、`<script>`）。

4. **计算布局（Layout）**：浏览器根据渲染树的信息计算每个节点在页面上的几何布局，包括位置、大小、边距等信息。这个过程称为布局或回流（reflow）。

5. **绘制（Painting）**：浏览器将每个节点根据其在布局阶段计算出的位置和大小信息绘制到屏幕上。这个过程称为绘制或重绘（repaint）。

6. **合成（Compositing）**：如果页面中有多个图层，浏览器会将这些图层合成为一个整体显示在屏幕上，这个过程称为合成。

7. **动画和交互**：如果页面中包含动画效果或用户交互，浏览器会根据相应的事件触发相应的操作，如执行 CSS 动画、处理鼠标点击等。
